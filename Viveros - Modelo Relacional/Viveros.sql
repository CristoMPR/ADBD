-- MySQL Script generated by MySQL Workbench
-- Sun Oct 31 18:15:27 2021
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering


-- -----------------------------------------------------
-- Schema Viveros
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS Viveros;
CREATE SCHEMA Viveros;

-- -----------------------------------------------------
-- Table `Viveros`.`VIVERO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS Viveros.VIVERO ;

CREATE TABLE IF NOT EXISTS Viveros.VIVERO (
  Coordenadas VARCHAR(100) NOT NULL,
  Localidad VARCHAR(45) NULL,
  PRIMARY KEY (Coordenadas));


-- -----------------------------------------------------
-- Table `Viveros`.`CLIENTE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS Viveros.CLIENTE ;

CREATE TABLE IF NOT EXISTS Viveros.CLIENTE (
  DNI VARCHAR(9) NOT NULL,
  Bonificación DECIMAL(3,2) NULL,
  Total_mensual INT NULL,
  Fecha_ingreso DATE NULL,
  PRIMARY KEY (DNI));


-- -----------------------------------------------------
-- Table `Viveros`.`ZONA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS Viveros.ZONA ;

CREATE TABLE IF NOT EXISTS Viveros.ZONA (
  Nombre VARCHAR(45) NOT NULL,
  VIVERO_Coordenadas VARCHAR(100) NOT NULL,
  PRIMARY KEY (Nombre, VIVERO_Coordenadas),
  CONSTRAINT fk_ZONA_VIVERO
    FOREIGN KEY (VIVERO_Coordenadas)
    REFERENCES Viveros.VIVERO (Coordenadas)
    ON DELETE CASCADE
    ON UPDATE CASCADE);


-- -----------------------------------------------------
-- Table `Viveros`.`EMPLEADO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS Viveros.EMPLEADO ;

CREATE TABLE IF NOT EXISTS Viveros.EMPLEADO (
  DNI VARCHAR(9) NOT NULL,
  ZONA_Nombre VARCHAR(45) NOT NULL,
  ZONA_VIVERO_Coordenadas VARCHAR(100) NOT NULL,
  Antigüedad VARCHAR(45) NULL,
  Sueldo DECIMAL(6,2) NULL,
  CSS VARCHAR(45) NULL,
  Fecha_ini DATE NULL,
  Fecha_fin DATE NULL,
  Ventas INT NULL,
  PRIMARY KEY (DNI),
  CONSTRAINT fk_EMPLEADO_ZONA1
    FOREIGN KEY (ZONA_Nombre , ZONA_VIVERO_Coordenadas)
    REFERENCES Viveros.ZONA (Nombre , VIVERO_Coordenadas)
    ON DELETE CASCADE
    ON UPDATE CASCADE);


-- -----------------------------------------------------
-- Table `Viveros`.`PRODUCTO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS Viveros.PRODUCTO ;

CREATE TABLE IF NOT EXISTS Viveros.PRODUCTO (
  Código_producto INT NOT NULL,
  Precio DECIMAL(4,2) NULL,
  Stock INT NULL,
  PRIMARY KEY (Código_producto));


-- -----------------------------------------------------
-- Table `Viveros`.`COMPRA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS Viveros.COMPRA ;

CREATE TABLE IF NOT EXISTS Viveros.COMPRA (
  Fecha DATE NOT NULL,
  CLIENTE_DNI VARCHAR(9) NOT NULL,
  PRODUCTO_Código_producto INT NOT NULL,
  EMPLEADO_DNI VARCHAR(9) NOT NULL,
  Cantidad INT NULL,
  PRIMARY KEY (Fecha),
  CONSTRAINT fk_COMPRA_CLIENTE1
    FOREIGN KEY (CLIENTE_DNI)
    REFERENCES Viveros.CLIENTE (DNI)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT fk_COMPRA_PRODUCTO1
    FOREIGN KEY (PRODUCTO_Código_producto)
    REFERENCES Viveros.PRODUCTO (Código_producto)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT fk_COMPRA_EMPLEADO1
    FOREIGN KEY (EMPLEADO_DNI)
    REFERENCES Viveros.EMPLEADO (DNI)
    ON DELETE CASCADE
    ON UPDATE CASCADE);


-- -----------------------------------------------------
-- Table `Viveros`.`UBICA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS Viveros.UBICA ;

CREATE TABLE IF NOT EXISTS Viveros.UBICA (
  ZONA_Nombre VARCHAR(45) NULL,
  ZONA_VIVERO_Coordenadas VARCHAR(100) NULL,
  PRODUCTO_Código_producto INT NULL,
  CONSTRAINT fk_UBICA_ZONA1
    FOREIGN KEY (ZONA_Nombre , ZONA_VIVERO_Coordenadas)
    REFERENCES Viveros.ZONA (Nombre , VIVERO_Coordenadas)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT fk_UBICA_PRODUCTO1
    FOREIGN KEY (PRODUCTO_Código_producto)
    REFERENCES Viveros.PRODUCTO (Código_producto)
    ON DELETE CASCADE
    ON UPDATE CASCADE);


-- -----------------------------------------------------
-- Data for table `Viveros`.`VIVERO`
-- -----------------------------------------------------

INSERT INTO Viveros.VIVERO (Coordenadas, Localidad) VALUES ('28,27,46,N 16,18,22,W', 'La Laguna');
INSERT INTO Viveros.VIVERO (Coordenadas, Localidad) VALUES ('28,23,43,N 16,32,50,W', 'La Orotava');

COMMIT;


-- -----------------------------------------------------
-- Data for table `Viveros`.`CLIENTE`
-- -----------------------------------------------------

INSERT INTO Viveros.CLIENTE (DNI, Bonificación, Total_mensual, Fecha_ingreso) VALUES ('33333333C', NULL, NULL, NULL);
INSERT INTO Viveros.CLIENTE (DNI, Bonificación, Total_mensual, Fecha_ingreso) VALUES ('44444444D', NULL, NULL, NULL);

COMMIT;


-- -----------------------------------------------------
-- Data for table `Viveros`.`ZONA`
-- -----------------------------------------------------

INSERT INTO Viveros.ZONA (Nombre, VIVERO_Coordenadas) VALUES ('Caja', '28,27,46,N 16,18,22,W');
INSERT INTO Viveros.ZONA (Nombre, VIVERO_Coordenadas) VALUES ('Caja', '28,23,43,N 16,32,50,W');
INSERT INTO Viveros.ZONA (Nombre, VIVERO_Coordenadas) VALUES ('Almacén', '28,27,46,N 16,18,22,W');
INSERT INTO Viveros.ZONA (Nombre, VIVERO_Coordenadas) VALUES ('Almacén', '28,23,43,N 16,32,50,W');

COMMIT;


-- -----------------------------------------------------
-- Data for table `Viveros`.`EMPLEADO`
-- -----------------------------------------------------
INSERT INTO Viveros.EMPLEADO (DNI, ZONA_Nombre, ZONA_VIVERO_Coordenadas, Antigüedad, Sueldo, CSS, Fecha_ini, Fecha_fin, Ventas) VALUES ('11111111A', 'Caja', '28,27,46,N 16,18,22,W', NULL, NULL, NULL, NULL, NULL, NULL);
INSERT INTO Viveros.EMPLEADO (DNI, ZONA_Nombre, ZONA_VIVERO_Coordenadas, Antigüedad, Sueldo, CSS, Fecha_ini, Fecha_fin, Ventas) VALUES ('22222222B', 'Almacén', '28,23,43,N 16,32,50,W', NULL, NULL, NULL, NULL, NULL, NULL);

COMMIT;


-- -----------------------------------------------------
-- Data for table `Viveros`.`PRODUCTO`
-- -----------------------------------------------------
INSERT INTO Viveros.PRODUCTO (Código_producto, Precio, Stock) VALUES (001, 10.00, 3);
INSERT INTO Viveros.PRODUCTO (Código_producto, Precio, Stock) VALUES (002, 7.25, 5);

COMMIT;


-- -----------------------------------------------------
-- Data for table `Viveros`.`COMPRA`
-- -----------------------------------------------------
INSERT INTO Viveros.COMPRA (Fecha, CLIENTE_DNI, PRODUCTO_Código_producto, EMPLEADO_DNI, Cantidad) VALUES ('2021-12-01', '33333333C', 001, '11111111A', NULL);
INSERT INTO Viveros.COMPRA (Fecha, CLIENTE_DNI, PRODUCTO_Código_producto, EMPLEADO_DNI, Cantidad) VALUES ('2021-11-24', '44444444D', 002, '22222222B', NULL);

COMMIT;


-- -----------------------------------------------------
-- Data for table `Viveros`.`UBICA`
-- -----------------------------------------------------
INSERT INTO Viveros.UBICA (ZONA_Nombre, ZONA_VIVERO_Coordenadas, PRODUCTO_Código_producto) VALUES ('Almacén', '28,27,46,N 16,18,22,W', 001);
INSERT INTO Viveros.UBICA (ZONA_Nombre, ZONA_VIVERO_Coordenadas, PRODUCTO_Código_producto) VALUES ('Almacén', '28,23,43,N 16,32,50,W', 001);
INSERT INTO Viveros.UBICA (ZONA_Nombre, ZONA_VIVERO_Coordenadas, PRODUCTO_Código_producto) VALUES ('Caja', '28,27,46,N 16,18,22,W', 002);
INSERT INTO Viveros.UBICA (ZONA_Nombre, ZONA_VIVERO_Coordenadas, PRODUCTO_Código_producto) VALUES ('Caja', '28,23,43,N 16,32,50,W', 002);

COMMIT;

